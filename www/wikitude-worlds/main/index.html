<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,target-densitydpi=device-dpi"
          name="viewport">

    <title>Sortie - AR View</title>

    <!-- Lodash -->
    <script src="../../lib/lodash/dist/lodash.min.js"></script>

    <!-- Ionic -->
    <script src="architect://architect.js"></script>
    <script src="../../lib/ionic/js/ionic.bundle.min.js"></script>
    <link rel="stylesheet" href="../../lib/ionic/css/ionic.min.css">
    <script src="../../lib/ngCordova/dist/ng-cordova.min.js"></script>

    <!-- Turf -->
    <script src="../../lib/turf/turf.min.js"></script>
    <script src="../../lib/angular-turf-module/angular-turf-module.js"></script>

    <!-- Leaflet -->
    <script src="../../lib/leaflet/dist/leaflet.js"></script>
    <link rel="stylesheet" href="../../lib/leaflet/dist/leaflet.css">
    <script src="../../lib/angular-leaflet-directive/dist/angular-leaflet-directive.min.js"></script>

    <script src="../ar-back-button-directive.js"></script>

    <!-- AR-Lib -->
    <script src="../ar-lib/ar-lib.module.js"></script>
    <script src="../ar-lib/ar-lib.do.js"></script>
    <script src="../ar-lib/ar-lib.user-location.js"></script>
    <script src="../ar-lib/ar-lib.markers.js"></script>
    <script src="../ar-lib/ar-lib.poi.js"></script>
    <script src="../ar-lib/ar-lib.beacon.js"></script>

    <!-- Main -->
    <script src="main.module.js"></script>
    <script src="main.world.js"></script>
    <script src="main.controllers.js"></script>
    <script src="filters.controller.js"></script>
    <script src="filters.service.js"></script>

    <style>
      #test-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 100%;
        text-align: right;
      }

      option.placeholder {
        color: #c0c0c0;
      }

      .filters {
        position: fixed;
        bottom: 30px;
        left: 20px;
      }

      .filters a {
        display: block;
        width: 80px;
        height: 80px;
        font-size: 70px;
        padding: 5px;
        text-align: center;
        -webkit-border-radius: 80px;
        -moz-border-radius: 80px;
        border-radius: 80px;
        background-color: red;
        color: white;
      }

      .mini-map {
        position: fixed;
        bottom: 20px;
        right: 20px;
      }

      .mini-map .leaflet-container {
        height: 100px;
        width: 100px;
        -webkit-border-radius: 100px;
        -moz-border-radius: 100px;
        border-radius: 100px;
        -webkit-mask-image: url(../../img/mask.svg);
      }

      .mini-map .leaflet-control-container {
        display: none;
      }

      #radarContainer {
        position: absolute;
        right: 140px;
        bottom: 20px;
        width: 100px;
        height: 100px;
      }

      .stats {
        position: absolute;
        top: 44px;
        left: 0;
        right: 0;
        background-color: white;
      }

      .stats span {
        text-align: center;
      }

      .stats .plus {
        color: green;
      }

      .stats .moins {
        color: red;
      }

      .stats .total {
        color: blue;
      }
    </style>
  </head>
  <body ng-app="ar" ng-controller="baseCtrl as base">
    <ion-header-bar class="bar-balanced">
      <button class="button back-button button-icon" ng-click="base.closeAR()">
        <i class="icon ion-android-arrow-back"></i>
      </button>
      <h1 class="title">Ionic + Wikitude</h1>
      <button class="button button-icon" ng-click="base.showOptModal()">
        <i class="icon ion-android-options"></i>
      </button>
    </ion-header-bar>
    <div id="radarContainer"></div>
    <!--<div id="test-button" ng-controller="buttonCtrl as button">-->
    <!--<button class="button button-royal" on-release="button.loadTestPois()">Load</button>-->
    <!--&lt;!&ndash;<button class="button button-royal" on-release="button.show()">Show</button>&ndash;&gt;-->
    <!--<button class="button button-royal" on-release="button.nearestBeacon()">Scan</button>-->
    <!--<button class="button button-royal" on-release="button.debug()">Debug</button>-->
    <!--</div>-->
    <div class="filters" data-tap-disabled="true">
      <a class="icon ion-gear-a" href="#" ng-click="base.showFiltersModal()"></a>
    </div>
    <div class="mini-map" ng-controller="MapCtrl as map" data-tap-disabled="true" 
         ng-style="{'transform': map.mapOrientation, '-webkit-transform': map.mapOrientation, '-ms-transform': map.mapOrientation}">
      <leaflet defaults="map.spec.defaults" tiles="map.spec.tiles" markers="map.spec.markers" center="map.spec.center"
               geojson="map.spec.path" event-broadcast="map.spec.events"></leaflet>
    </div>
    <div class="stats row" ng-controller="StatsCtrl as stats">
      <span class="plus col">+ {{stats.plus}}</span><span class="moins col">- {{stats.moins}}</span><span
      class="total col">Tot: {{stats.total}}</span>
    </div>
  </body>
</html>
