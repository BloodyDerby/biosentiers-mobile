"use strict";function UnsupportedFeatureError(){var e=Error.apply(this,arguments);e.name=this.name="UnsupportedFeatureError",this.stack=e.stack,e.message?this.message=e.message:this.message="Worls loading error : Your device does not support one or several of it's requested features."}UnsupportedFeatureError.prototype=Object.create(Error.prototype,{constructor:{value:UnsupportedFeatureError,writable:!0,configurable:!0}}),function(){function e(e){function t(){console.log(Object.getOwnPropertyNames(g))}function o(e,t){function o(e){if(g.hasOwnProperty(e))throw new SyntaxError("Ionicitude - addAction() - The name '"+e+"' has already been added or is a reserved Ionicitude name.")}if("string"==typeof e||e instanceof String){if(!t)throw new TypeError("Ionicitude - addAction() expects a second argument if first argument is of type 'string'.");if("function"!=typeof t)throw new TypeError("Ionicitude - addAction() expects second argument to only be of type 'function', '"+typeof t+"' given.");o(e),g[e]=t}else{if(!("function"==typeof e||e instanceof Function))throw new TypeError("Ionicitude - addAction() expects first argument to be of type 'string' or 'function', '"+typeof e+"' given");var r=e.name;if(!r)throw new TypeError("Ionicitude - addAction() do not accept anonymous function as first argument. Please, try passing a named function instead.");o(r),g[r]=e}return f}function r(){console.log("checking device");var t=e.defer();return d.isDeviceSupported(function(e){console.log(e),f.deviceSupportsFeatures=!0,t.resolve(e)},function(e){console.log(e),f.deviceSupportsFeatures=!1,t.reject(e)},m.reqFeatures),t.promise}function n(e){function t(){return e&&e.hasOwnProperty("customCallback")&&"function"==typeof e.customCallback}function o(){return!(e&&e.hasOwnProperty("doDeviceCheck")&&e.doDeviceCheck===!1)}if(console.log(e),!l){console.log("init service starting"),l=!0,u();var n=a;t()&&(n=e.customCallback),d.setOnUrlInvokeCallback(n),o()&&r()||console.log("check skipped due to init settings")}return f}function i(t){if(t||(t="main"),f.deviceSupportsFeatures){var o=e.defer();return console.log("launch"),d.loadARchitectWorld(function(e){o.resolve(e)},function(e){o.reject(e)},c(t),m.reqFeatures,m.worldConfig),o.promise}throw new UnsupportedFeatureError}function c(e){return"www/"+m.worldsRootFolder+"/"+e+"/index.html"}function a(e){var t=s(e);if(console.log(e,t),console.log(g),console.log(!g.hasOwnProperty(t.funcName)),console.log(typeof g[t.funcName]),!g.hasOwnProperty(t.funcName)||"function"!=typeof g[t.funcName])throw new TypeError("'"+t.funcName+"' is either undefined or not a function in the Ionicitude service.");g[t.funcName](d,t.parameters)}function s(e){if(e.substr(0,p.length)===p){var t={},o=e.substr(p.length),r=o.indexOf("?");if(-1===r)t.funcName=o,t.parameters=null;else try{t.funcName=o.substr(0,r);var n=o.substr(r+1);t.parameters=angular.fromJson(n)}catch(i){throw i instanceof SyntaxError?new SyntaxError("parseActionUrl() expects the substring following the '?' in the parameter string to be a valid JSON object. '"+n+"' given."):i}return t}throw new SyntaxError("parseActionUrl() expects first parameter to be a string starting with '"+p+"'.")}function u(){d||(d=cordova.require("com.wikitude.phonegap.WikitudePlugin.WikitudePlugin"))}var d,f={checkDevice:r,deviceSupportsFeatures:!1,init:n,launchAR:i,addAction:o,listLibActions:t},l=!1,p="architectsdk://",g={},m={worldConfig:{camera_position:"back"},reqFeatures:["geo","2dtracking"],worldsRootFolder:"wikitude-worlds"};return f}e.$inject=["$q"],angular.module("IonicitudeModule",[]),angular.module("IonicitudeModule").factory("Ionicitude",e)}();