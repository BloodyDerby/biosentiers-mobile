"use strict";function UnsupportedFeatureError(){var e=Error.apply(this,arguments);e.name=this.name="UnsupportedFeatureError",this.stack=e.stack,e.message?this.message=e.message:this.message="Worls loading error : Your device does not support one or several of it's requested features."}UnsupportedFeatureError.prototype=Object.create(Error.prototype,{constructor:{value:UnsupportedFeatureError,writable:!0,configurable:!0}}),function(){function e(){function e(){return r||(r=cordova.require("com.wikitude.phonegap.WikitudePlugin.WikitudePlugin")),r}var r=void 0;this.get=e}function r(e){function r(){e.get().close()}function t(){e.get().hide()}this.close=r,this.hide=t}function t(e,r,t,o,n){function i(e,r){if("string"!=typeof e)throw new TypeError("Ionicitude.registerFunction() expects first parameter to be of type 'string', you gave a '"+typeof e+"' instead.");if(t.hasOwnProperty(e))throw new SyntaxError("Ionicitude.registerFunction() - The name '"+e+"' has already been registered or is a reserved Ionicitude name");if("function"!=typeof r)throw new TypeError("Ionicitude.registerFunction() expects second parameter to be of type 'function', you gave a '"+typeof e+"' instead.")}function u(){console.log("checking device");var o=e.defer();return r.get().isDeviceSupported(function(e){console.log(e),g.deviceSupportsFeatures=!0,o.resolve(e)},function(e){console.log(e),g.deviceSupportsFeatures=!1,o.reject(e)},t.reqFeatures),o.promise}function s(e){function t(){return e&&e.hasOwnProperty("customCallback")&&"function"==typeof e.customCallback}function o(){return!(e&&e.hasOwnProperty("doDeviceCheck")&&e.doDeviceCheck===!1)}if(console.log(e),!f){console.log("init service starting"),f=!0;var n=d;t()&&(n=e.onUrlInvokeCallback),r.get().setOnUrlInvokeCallback(n),o()&&u()||console.log("check skipped due to init settings")}}function a(o){if(o||(o="main"),g.deviceSupportsFeatures){var n=e.defer();return console.log("launch"),r.get().loadARchitectWorld(function(e){n.resolve(e)},function(e){n.reject(e)},l(o),t.reqFeatures,t.worldConfig),n.promise}throw new UnsupportedFeatureError}function c(e){}function l(e){return"www/"+t.worldsRootFolder+"/"+e+"/index.html"}function d(e){var r=p(e);try{n[r.funcName](r.parameters)}catch(t){throw t instanceof TypeError?new TypeError(r.funcName+"is either undefined or not a function in the Ionicitude lib service."):t}}function p(e){if(e.substr(0,o.length)===o){var r={},t=e.substr(o.length),n=t.indexOf("?");if(-1===n)r.funcName=t,r.parameters=null;else try{r.funcName=t.substr(0,n);var i=t.substr(n+1);r.parameters=angular.fromJson(i)}catch(u){throw u instanceof SyntaxError?new SyntaxError("parseActionUrl() expects the substring following the '?' in the parameter string to be a valid JSON object. '"+i+"' given."):u}return r}throw new SyntaxError("parseActionUrl() expects first parameter to be a string starting with '"+o+"'.")}var f=!1,g={checkDevice:u,deviceSupportsFeatures:"pouet",init:s,launchAR:a,setup:c,registerFunction:i};return g}r.$inject=["plugin"],t.$inject=["$q","plugin","settings","protocol","lib"],angular.module("IonicitudeModule",[]);var o={worldConfig:{camera_position:"back"},reqFeatures:["geo","2dtracking"],worldsRootFolder:"wikitude-worlds",worldsFolders:{main:{folder:"main",file:"index"}}};angular.module("IonicitudeModule").value("settings",o),angular.module("IonicitudeModule").constant("protocol","architectsdk://"),angular.module("IonicitudeModule").service("plugin",e),angular.module("IonicitudeModule").service("lib",r),angular.module("IonicitudeModule").factory("Ionicitude",t)}();